<!-- 
	iio Engine v1.3 preview
	*************************
	the source code for 1.3 is not yet available for download
	this document previews the new syntax 
	
	Live Demo: http://iioengine.com/1.3/demos/edit_text.htm
 -->
<!DOCTYPE html>
<html>
	<body>
		<video id="v" style='display:none' controls loop autoplay>
	     <source src="nysub.mp4" type="video/mp4">
	    </video>
		<script type="text/javascript" src="../js/iioEngine.min.pre1.3.js"></script>
		<script type="text/javascript">
    function draw(v,c,bc,w,h) {
        if(v.paused || v.ended) return false;
        bc.drawImage(v,0,0,w,h);
        var idata = bc.getImageData(0,0,w,h);
        /*var data = idata.data;
	        for(i = 0; i < data.length; i+=4) {
	          	data[i]=100-data[i];
	          	data[i+1]=100-data[i+1];
	        	data[i+2]=100-data[i+2];
	        }
	        idata.data = data;*/
        c.putImageData(idata,0,0);
        setTimeout(function(){ draw(v,c,bc,w,h); }, 0);
    }
    document.addEventListener('DOMContentLoaded', function(){
      XX=function(io){
        var v = document.getElementById('v');
        var canvas = io.canvas;
        var context = io.ctx;
        var back = document.createElement('canvas');
        var backcontext = back.getContext('2d');
        var cw,ch;  
        v.addEventListener('play', function(){
            cw = window.innerWidth;
            ch = window.innerHeight;
            canvas.width = cw;
            canvas.height = ch;
            back.width = cw;
            back.height = ch;
            draw(v,context,backcontext,cw,ch);
        },false);
      };iio.start(XX);
    },false);
		</script>
	</body>
</html>