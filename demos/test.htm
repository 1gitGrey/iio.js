<!doctype html>
  <body>
    <script type="text/javascript" src="../core/iioEngine.js"></script>
    <script type="text/javascript" src="../extensions/iioDebugger1.js"></script>
    <script type="text/javascript">

   CollidingBoxes = function(io){
 
  createBox = function(xPos, xVel, fillStyle){
    return io.addToGroup('boxes'
      ,new iio.ioPoly(xPos, io.canvas.height/2, [-70,10
                                 ,-50,30
                                 , 10,10
                                 ,-20,-80])
      .setFillStyle(fillStyle)
      .enableKinematics()
      .setVel(xVel,0)
      .rotate(Math.PI/4)
      .setBound('left', 0
        ,function(obj){
          obj.vel.x = 3;
          return true;
         })
      .setBound('right', io.canvas.width
        ,function(obj){
          obj.vel.x = -3;
          return true;
        }));
  }
 
  var b1 = createBox(40, 3, '#00baff');
  var b2 = createBox(io.canvas.width-40, -3, 'red');
 
  io.setCollisionCallback('boxes'
    ,function(box1,box2){
       var temp = box1.vel.clone();
       box1.vel = box2.vel.clone();
       box2.vel = temp;
     });
 
  io.setFramerate(60, function(){
    var a = b1.vel;
    var b = b2.vel;
  })
 
}; iio.start(CollidingBoxes);

    </script>
  </body>
</html>
